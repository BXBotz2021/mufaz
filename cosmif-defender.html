<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cosmic Defender</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background-color: #0a0a1a;
            color: #fff;
            font-family: 'Press Start 2P', cursive;
            overflow: hidden;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        @font-face {
            font-family: 'Press Start 2P';
            src: url('https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap');
        }

        #game-container {
            position: relative;
            width: 800px;
            height: 600px;
            overflow: hidden;
            border: 4px solid #4a00e0;
            border-radius: 10px;
            box-shadow: 0 0 30px #8e2de2;
        }

        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            padding: 20px;
            transition: all 0.5s ease;
        }

        .hidden {
            opacity: 0;
            pointer-events: none;
        }

        h1 {
            color: #ff00ff;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
            margin-bottom: 30px;
            font-size: 2.5rem;
        }

        p {
            margin-bottom: 20px;
            color: #00ffff;
            line-height: 1.6;
        }

        button {
            background: linear-gradient(45deg, #8e2de2, #4a00e0);
            color: white;
            border: none;
            padding: 15px 30px;
            font-family: 'Press Start 2P', cursive;
            font-size: 1rem;
            margin: 20px 0;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.3s;
            box-shadow: 0 0 15px rgba(142, 45, 226, 0.7);
        }

        button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(142, 45, 226, 0.9);
        }

        button:active {
            transform: scale(0.98);
        }

        .controls {
            margin-top: 30px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00ffff;
        }

        #game-screen {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="400" height="400" viewBox="0 0 800 800"><g fill="rgba(255,255,255,0.1)"><circle cx="400" cy="400" r="1.5"/><circle cx="200" cy="200" r="1"/><circle cx="600" cy="600" r="1"/><circle cx="100" cy="300" r="1.5"/><circle cx="700" cy="500" r="1"/><circle cx="300" cy="700" r="1.5"/><circle cx="500" cy="100" r="1"/><circle cx="150" cy="650" r="1"/><circle cx="650" cy="150" r="1.5"/></g></svg>');
        }

        #game-canvas {
            background-color: transparent;
            display: block;
        }

        #score-display, #lives-display {
            position: absolute;
            top: 20px;
            font-size: 1rem;
            color: #00ff00;
            text-shadow: 0 0 5px #00ff00;
        }

        #score-display {
            left: 20px;
        }

        #lives-display {
            right: 20px;
        }

        #game-over-screen h1 {
            color: #ff0000;
            text-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000;
        }

        #final-score {
            color: #ffff00;
            text-shadow: 0 0 5px #ffff00;
        }

        /* Mobile responsiveness */
        @media (max-width: 800px) {
            #game-container {
                width: 100vw;
                height: 100vh;
                border: none;
                border-radius: 0;
            }

            h1 {
                font-size: 1.8rem;
            }

            p {
                font-size: 0.8rem;
            }

            button {
                padding: 12px 24px;
                font-size: 0.8rem;
            }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div id="start-screen" class="screen">
            <h1>COSMIC DEFENDER</h1>
            <p>Defend your planet from incoming asteroids!</p>
            <button id="start-btn">START GAME</button>
            <div class="controls">
                <p>CONTROLS:</p>
                <p>← → Arrow Keys to Move</p>
                <p>Spacebar to Shoot</p>
            </div>
        </div>
        
        <div id="game-screen" class="screen hidden">
            <div id="score-display">SCORE: <span>0</span></div>
            <div id="lives-display">LIVES: <span>3</span></div>
            <canvas id="game-canvas"></canvas>
        </div>
        
        <div id="game-over-screen" class="screen hidden">
            <h1>GAME OVER</h1>
            <p>Your score: <span id="final-score">0</span></p>
            <button id="restart-btn">PLAY AGAIN</button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // Game elements
            const startScreen = document.getElementById('start-screen');
            const gameScreen = document.getElementById('game-screen');
            const gameOverScreen = document.getElementById('game-over-screen');
            const startBtn = document.getElementById('start-btn');
            const restartBtn = document.getElementById('restart-btn');
            const canvas = document.getElementById('game-canvas');
            const ctx = canvas.getContext('2d');
            const scoreDisplay = document.querySelector('#score-display span');
            const livesDisplay = document.querySelector('#lives-display span');
            const finalScoreDisplay = document.getElementById('final-score');

            // Set canvas size
            canvas.width = 800;
            canvas.height = 600;

            // Game variables
            let score = 0;
            let lives = 3;
            let gameRunning = false;
            let animationId;
            let particles = [];
            let stars = [];
            let explosions = [];

            // Player object
            const player = {
                x: canvas.width / 2 - 25,
                y: canvas.height - 80,
                width: 50,
                height: 50,
                speed: 8,
                color: '#00ffff',
                isMovingLeft: false,
                isMovingRight: false,
                bullets: [],
                lastShot: 0,
                shootDelay: 300, // milliseconds
                
                draw() {
                    ctx.fillStyle = this.color;
                    // Draw ship body
                    ctx.beginPath();
                    ctx.moveTo(this.x + this.width / 2, this.y);
                    ctx.lineTo(this.x + this.width, this.y + this.height);
                    ctx.lineTo(this.x, this.y + this.height);
                    ctx.closePath();
                    ctx.fill();
                    
                    // Draw ship details
                    ctx.fillStyle = '#ffffff';
                    ctx.fillRect(this.x + this.width / 2 - 5, this.y + 10, 10, 15);
                },
                
                update() {
                    if (this.isMovingLeft && this.x > 0) {
                        this.x -= this.speed;
                    }
                    if (this.isMovingRight && this.x < canvas.width - this.width) {
                        this.x += this.speed;
                    }
                    
                    // Update bullets
                    for (let i = this.bullets.length - 1; i >= 0; i--) {
                        this.bullets[i].update();
                        if (this.bullets[i].y < 0) {
                            this.bullets.splice(i, 1);
                        }
                    }
                },
                
                shoot() {
                    const now = Date.now();
                    if (now - this.lastShot > this.shootDelay) {
                        this.bullets.push({
                            x: this.x + this.width / 2 - 2.5,
                            y: this.y,
                            width: 5,
                            height: 15,
                            speed: 10,
                            color: '#ffff00',
                            
                            draw() {
                                ctx.fillStyle = this.color;
                                ctx.fillRect(this.x, this.y, this.width, this.height);
                            },
                            
                            update() {
                                this.y -= this.speed;
                                this.draw();
                            }
                        });
                        this.lastShot = now;
                        
                        // Play shoot sound
                        playSound('shoot');
                    }
                }
            };

            // Enemies array
            let enemies = [];

            // Create enemies
            function createEnemy() {
                const size = Math.random() * 30 + 20;
                const speed = Math.random() * 2 + 1;
                
                enemies.push({
                    x: Math.random() * (canvas.width - size),
                    y: -size,
                    width: size,
                    height: size,
                    speed: speed,
                    color: `hsl(${Math.random() * 60 + 10}, 70%, 50%)`,
                    rotation: 0,
                    rotationSpeed: Math.random() * 4 - 2,
                    
                    draw() {
                        ctx.save();
                        ctx.translate(this.x + this.width / 2, this.y + this.height / 2);
                        ctx.rotate(this.rotation * Math.PI / 180);
                        ctx.fillStyle = this.color;
                        
                        // Draw asteroid shape
                        ctx.beginPath();
                        ctx.moveTo(0, -this.height / 2);
                        ctx.lineTo(this.width / 3, -this.height / 4);
                        ctx.lineTo(this.width / 2, this.height / 4);
                        ctx.lineTo(this.width / 4, this.height / 2);
                        ctx.lineTo(-this.width / 4, this.height / 2);
                        ctx.lineTo(-this.width / 2, this.height / 4);
                        ctx.lineTo(-this.width / 3, -this.height / 4);
                        ctx.closePath();
                        ctx.fill();
                        
                        ctx.restore();
                    },
                    
                    update() {
                        this.y += this.speed;
                        this.rotation += this.rotationSpeed;
                        this.draw();
                    }
                });
            }

            // Create stars for background
            function createStars() {
                for (let i = 0; i < 100; i++) {
                    stars.push({
                        x: Math.random() * canvas.width,
                        y: Math.random() * canvas.height,
                        radius: Math.random() * 1.5,
                        speed: Math.random() * 2 + 0.5,
                        color: `rgba(255, 255, 255, ${Math.random() * 0.8 + 0.2})`
                    });
                }
            }

            // Create particles
            function createParticles(x, y, color, count = 20) {
                for (let i = 0; i < count; i++) {
                    particles.push({
                        x: x,
                        y: y,
                        radius: Math.random() * 3 + 1,
                        color: color || `hsl(${Math.random() * 360}, 100%, 50%)`,
                        speed: Math.random() * 3 + 1,
                        angle: Math.random() * Math.PI * 2,
                        life: 100,
                        decay: Math.random() * 2 + 1,
                        
                        update() {
                            this.x += Math.cos(this.angle) * this.speed;
                            this.y += Math.sin(this.angle) * this.speed;
                            this.life -= this.decay;
                        },
                        
                        draw() {
                            ctx.globalAlpha = this.life / 100;
                            ctx.fillStyle = this.color;
                            ctx.beginPath();
                            ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                            ctx.fill();
                            ctx.globalAlpha = 1;
                        }
                    });
                }
            }

            // Create explosion
            function createExplosion(x, y, size) {
                explosions.push({
                    x: x,
                    y: y,
                    radius: 5,
                    maxRadius: size * 2,
                    color: `hsl(${Math.random() * 60 + 10}, 100%, 50%)`,
                    growing: true,
                    
                    update() {
                        if (this.growing) {
                            this.radius += 3;
                            if (this.radius >= this.maxRadius) {
                                this.growing = false;
                            }
                        } else {
                            this.radius -= 2;
                        }
                    },
                    
                    draw() {
                        const gradient = ctx.createRadialGradient(
                            this.x, this.y, 0,
                            this.x, this.y, this.radius
                        );
                        gradient.addColorStop(0, this.color);
                        gradient.addColorStop(0.7, `${this.color}80`);
                        gradient.addColorStop(1, `${this.color}00`);
                        
                        ctx.fillStyle = gradient;
                        ctx.beginPath();
                        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                        ctx.fill();
                    }
                });
            }

            // Sound effects
            function playSound(type) {
                // In a real game, you would play actual sound files here
                // This is just a placeholder for the concept
                console.log(`Playing ${type} sound`);
            }

            // Check collision between two objects
            function checkCollision(obj1, obj2) {
                return obj1.x < obj2.x + obj2.width &&
                       obj1.x + obj1.width > obj2.x &&
                       obj1.y < obj2.y + obj2.height &&
                       obj1.y + obj1.height > obj2.y;
            }

            // Game loop
            function gameLoop() {
                // Clear canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // Draw stars
                ctx.fillStyle = 'rgba(255, 255, 255, 0.8)';
                stars.forEach(star => {
                    ctx.beginPath();
                    ctx.arc(star.x, star.y, star.radius, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // Move stars
                    star.y += star.speed;
                    if (star.y > canvas.height) {
                        star.y = 0;
                        star.x = Math.random() * canvas.width;
                    }
                });
                
                // Update and draw player
                player.update();
                player.draw();
                
                // Update and draw bullets
                player.bullets.forEach(bullet => bullet.update());
                
                // Update and draw enemies
                for (let i = enemies.length - 1; i >= 0; i--) {
                    enemies[i].update();
                    
                    // Check if enemy is out of bounds
                    if (enemies[i].y > canvas.height) {
                        enemies.splice(i, 1);
                        lives--;
                        livesDisplay.textContent = lives;
                        if (lives <= 0) {
                            gameOver();
                        }
                        continue;
                    }
                    
                    // Check collision with player
                    if (checkCollision(player, enemies[i])) {
                        createExplosion(enemies[i].x + enemies[i].width / 2, enemies[i].y + enemies[i].height / 2, enemies[i].width);
                        createParticles(enemies[i].x + enemies[i].width / 2, enemies[i].y + enemies[i].height / 2, enemies[i].color, 50);
                        enemies.splice(i, 1);
                        lives--;
                        livesDisplay.textContent = lives;
                        playSound('explosion');
                        if (lives <= 0) {
                            gameOver();
                        }
                        continue;
                    }
                    
                    // Check collision with bullets
                    for (let j = player.bullets.length - 1; j >= 0; j--) {
                        if (checkCollision(player.bullets[j], enemies[i])) {
                            createExplosion(enemies[i].x + enemies[i].width / 2, enemies[i].y + enemies[i].height / 2, enemies[i].width);
                            createParticles(enemies[i].x + enemies[i].width / 2, enemies[i].y + enemies[i].height / 2, enemies[i].color, 50);
                            enemies.splice(i, 1);
                            player.bullets.splice(j, 1);
                            score += 10;
                            scoreDisplay.textContent = score;
                            playSound('hit');
                            break;
                        }
                    }
                }
                
                // Update and draw particles
                for (let i = particles.length - 1; i >= 0; i--) {
                    particles[i].update();
                    particles[i].draw();
                    if (particles[i].life <= 0) {
                        particles.splice(i, 1);
                    }
                }
                
                // Update and draw explosions
                for (let i = explosions.length - 1; i >= 0; i--) {
                    explosions[i].update();
                    explosions[i].draw();
                    if (explosions[i].radius <= 0) {
                        explosions.splice(i, 1);
                    }
                }
                
                // Randomly create new enemies
                if (Math.random() < 0.02) {
                    createEnemy();
                }
                
                // Continue game loop if running
                if (gameRunning) {
                    animationId = requestAnimationFrame(gameLoop);
                }
            }

            // Start game
            function startGame() {
                startScreen.classList.add('hidden');
                gameScreen.classList.remove('hidden');
                gameOverScreen.classList.add('hidden');
                
                // Reset game state
                score = 0;
                lives = 3;
                enemies = [];
                particles = [];
                explosions = [];
                player.bullets = [];
                player.x = canvas.width / 2 - 25;
                player.y = canvas.height - 80;
                
                scoreDisplay.textContent = score;
                livesDisplay.textContent = lives;
                
                gameRunning = true;
                createStars();
                gameLoop();
            }

            // Game over
            function gameOver() {
                gameRunning = false;
                cancelAnimationFrame(animationId);
                gameScreen.classList.add('hidden');
                gameOverScreen.classList.remove('hidden');
                finalScoreDisplay.textContent = score;
                playSound('gameOver');
            }

            // Event listeners
            startBtn.addEventListener('click', startGame);
            restartBtn.addEventListener('click', startGame);
            
            // Keyboard controls
            window.addEventListener('keydown', (e) => {
                if (!gameRunning) return;
                
                switch(e.key) {
                    case 'ArrowLeft':
                        player.isMovingLeft = true;
                        break;
                    case 'ArrowRight':
                        player.isMovingRight = true;
                        break;
                    case ' ':
                        player.shoot();
                        break;
                }
            });
            
            window.addEventListener('keyup', (e) => {
                switch(e.key) {
                    case 'ArrowLeft':
                        player.isMovingLeft = false;
                        break;
                    case 'ArrowRight':
                        player.isMovingRight = false;
                        break;
                }
            });
            
            // Touch controls for mobile
            let touchX = null;
            
            canvas.addEventListener('touchstart', (e) => {
                if (!gameRunning) return;
                e.preventDefault();
                touchX = e.touches[0].clientX;
            });
            
            canvas.addEventListener('touchmove', (e) => {
                if (!gameRunning || touchX === null) return;
                e.preventDefault();
                const newTouchX = e.touches[0].clientX;
                const diff = newTouchX - touchX;
                
                if (diff > 5) {
                    player.isMovingRight = true;
                    player.isMovingLeft = false;
                } else if (diff < -5) {
                    player.isMovingLeft = true;
                    player.isMovingRight = false;
                }
                
                touchX = newTouchX;
            });
            
            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                player.isMovingLeft = false;
                player.isMovingRight = false;
                touchX = null;
            });
            
            // Shoot on touch
            canvas.addEventListener('click', (e) => {
                if (gameRunning) {
                    player.shoot();
                }
            });
        });
    </script>
</body>
</html>
